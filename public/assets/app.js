angular.module("app",["ngRoute","ui.router"]),angular.module("app").run(["$http","$window",function(e,t){e.defaults.headers.common["x-auth"]=t.sessionStorage.user_token}]),angular.module("app").controller("addUserCtrl",["$scope","$http",function(e,t){e.setup=function(){e.model={}},e.setup(),e.saveUser=function(){console.log("inside the func"),t.post("/api/users",{first_name:e.model.first_name,last_name:e.model.last_name,phone:e.model.phone,address:e.model.address,email:e.model.email}).then(function(t){console.log(t),$("#thanks").show().delay(5e3).fadeOut(),e.setup()},function(e){console.log(e)})}}]),angular.module("app").controller("adminCtrl",["$scope","$http","auth","$location","$timeout",function(e,t,o,n,l){e.loading=!0,e.setup=function(){t.get("/api/users").then(function(t){e.model=t.data,e.loading=!1},function(t){401==t.status&&(e.authFail=!0,l(function(){n.path("/login")},3e3))})},e.setup(),e.deleteUser=function(o){confirm("Are you sure?")&&t["delete"]("/api/users/"+o).then(function(t){console.log(t),e.setup()},function(e){console.log(e)})},e.logout=function(){o.logout()}}]),angular.module("app").controller("editUserCtrl",["$scope","$http","$location","$stateParams","$timeout",function(e,t,o,n,l){e.loading=!0,e.setup=function(){console.log(n),t.get("/api/users/"+n.id).then(function(t){e.model=t.data,console.log(e.model),e.loading=!1},function(e){console.log(e)})},e.updateUser=function(){e.loading=!0,t.put("/api/users/"+n.id,{first_name:e.model.first_name,last_name:e.model.last_name,phone:e.model.phone,address:e.model.address,email:e.model.email}).then(function(t){console.log(t),e.loading=!1,e.userSaved=!0,l(function(){e.userSaved=!1},3e3)},function(e){console.log(e)})},e.setup()}]),angular.module("app").controller("loginCtrl",["$scope","auth","$location","$timeout",function(e,t,o,n){console.log("login controller"),e.authFail=!1,e.login=function(o,l){t.login(o,l).then(function(e){t.storeToken(e.data,function(){t.getUser().then(function(e){t.postLoginOps(e.data,function(){t.postLoginRouteHandler()})})})})["catch"](function(t){console.error("Gists error",t.status,t.data),401==t.status&&(e.authFail=!0,n(function(){e.authFail=!1},3e3))})["finally"](function(){console.log("finally finished gists")})}}]),angular.module("app").controller("masterCtrl",["$scope","$rootScope","$route",function(e,t,o){console.log("masterCtrl"),localStorage.getItem("logged_user")&&(t.currentUser=localStorage.getItem("logged_user")),e.$on("login",function(o,n){console.log("Logged In"),e.currentUser=n,t.currentUser=n,localStorage.setItem("logged_user",t.currentUser.username)})}]),angular.module("app").controller("registerCtrl",["$scope","auth","$location",function(e,t,o){e.register=function(n,l,r){t.register(n,l,r).then(function(n){t.login(l,r),e.$emit("login",n.data),o.path("/admin")})["catch"](function(e){console.log(e)})}}]),angular.module("app").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){t.otherwise("/"),e.state("app",{url:"/",views:{content:{templateUrl:"/landing.html",controller:"userRegisterCtrl"}}}).state("login",{url:"/login",views:{content:{templateUrl:"/login.html",controller:"loginCtrl"}}}).state("register",{url:"/efb82ec7a1a0e477a33e209dacd2a1e0",views:{content:{templateUrl:"/register.html",controller:"registerCtrl"}}}).state("admin",{url:"/admin",views:{nav:{templateUrl:"/nav.html",controller:"adminCtrl"},content:{templateUrl:"/admin.html",controller:"adminCtrl"}}}).state("admin.new",{url:"/new",views:{"content@":{templateUrl:"/addUser.html",controller:"addUserCtrl"}}}).state("admin.details",{url:"/:id",views:{"content@":{templateUrl:"editUser.html",controller:"editUserCtrl"}}}),o.html5Mode(!0)}]),angular.module("app").controller("userRegisterCtrl",["$scope","$http",function(e,t){console.log("here in landing")}]),angular.module("app").service("auth",["$http","$window","$location","$rootScope",function(e,t,o,n){function l(){return e.get("api/admin")}function r(t,o){return e.post("api/sessions",{username:t,password:o})}function a(t,o,n){return e.post("api/admin",{name:t,username:o,password:n})}function s(){localStorage.removeItem("user_token"),localStorage.removeItem("logged_user"),t.sessionStorage.removeItem("user_token"),delete e.defaults.headers.common["x-auth"],n.isLogged=!1,n.currentUser=null,o.path("/login")}function i(o,n){t.sessionStorage.user_token=o,localStorage.setItem("user_token",o),e.defaults.headers.common["x-auth"]=t.sessionStorage.user_token,n&&"function"==typeof n&&n()}function u(){}function c(e,t){n.currentUser=e.name,localStorage.setItem("logged_user",n.currentUser),n.isLogged=!0,t&&"function"==typeof t&&t()}function d(){n.intendedRoute?o.path(n.intendedRoute):o.path("/admin")}return{getUser:l,login:r,register:a,logout:s,storeToken:i,isLogged:u,postLoginOps:c,postLoginRouteHandler:d}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbnRyb2xsZXJzL2FkZFVzZXJDdHJsLmpzIiwiY29udHJvbGxlcnMvYWRtaW5DdHJsLmpzIiwiY29udHJvbGxlcnMvZWRpdFVzZXJDdHJsLmpzIiwiY29udHJvbGxlcnMvbG9naW5DdHJsLmpzIiwiY29udHJvbGxlcnMvbWFzdGVyQ3RybC5qcyIsImNvbnRyb2xsZXJzL3JlZ2lzdGVyQ3RybC5qcyIsImNvbnRyb2xsZXJzL3JvdXRlcy5qcyIsImNvbnRyb2xsZXJzL3VzZXJSZWdpc3RlckN0cmwuanMiLCJzZXJ2aWNlcy9hdXRoLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkaHR0cCIsIiR3aW5kb3ciLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJzZXNzaW9uU3RvcmFnZSIsInVzZXJfdG9rZW4iLCJjb250cm9sbGVyIiwiJHNjb3BlIiwic2V0dXAiLCJtb2RlbCIsInNhdmVVc2VyIiwiY29uc29sZSIsImxvZyIsInBvc3QiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGhvbmUiLCJhZGRyZXNzIiwiZW1haWwiLCJ0aGVuIiwicmVzcG9uc2UiLCIkIiwic2hvdyIsImRlbGF5IiwiZmFkZU91dCIsImF1dGgiLCIkbG9jYXRpb24iLCIkdGltZW91dCIsImxvYWRpbmciLCJnZXQiLCJkYXRhIiwic3RhdHVzIiwiYXV0aEZhaWwiLCJwYXRoIiwiZGVsZXRlVXNlciIsInVzZXJfaWQiLCJjb25maXJtIiwibG9nb3V0IiwiJHN0YXRlUGFyYW1zIiwiaWQiLCJ1cGRhdGVVc2VyIiwicHV0IiwidXNlclNhdmVkIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwicmVzIiwic3RvcmVUb2tlbiIsImdldFVzZXIiLCJwb3N0TG9naW5PcHMiLCJwb3N0TG9naW5Sb3V0ZUhhbmRsZXIiLCJlcnJvciIsIiRyb290U2NvcGUiLCIkcm91dGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY3VycmVudFVzZXIiLCIkb24iLCJfIiwidXNlciIsInNldEl0ZW0iLCJyZWdpc3RlciIsIm5hbWUiLCIkZW1pdCIsImVyciIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiY29udGVudCIsInRlbXBsYXRlVXJsIiwibmF2IiwiY29udGVudEAiLCJodG1sNU1vZGUiLCJzZXJ2aWNlIiwicmVtb3ZlSXRlbSIsImlzTG9nZ2VkIiwiY2IiLCJpbnRlbmRlZFJvdXRlIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxPQUNBLFVBQUEsY0FFQUQsUUFBQUMsT0FBQSxPQUNBQyxLQUFBLFFBQUEsVUFBQSxTQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxTQUFBQyxRQUFBQyxPQUFBLFVBQUFILEVBQUFJLGVBQUFDLGNDTEFULFFBQUFDLE9BQUEsT0FDQVMsV0FBQSxlQUFBLFNBQUEsUUFBQSxTQUFBQyxFQUFBUixHQUNBUSxFQUFBQyxNQUFBLFdBQ0FELEVBQUFFLFVBRUFGLEVBQUFDLFFBQ0FELEVBQUFHLFNBQUEsV0FDQUMsUUFBQUMsSUFBQSxtQkFDQWIsRUFBQWMsS0FBQSxjQUNBQyxXQUFBUCxFQUFBRSxNQUFBSyxXQUNBQyxVQUFBUixFQUFBRSxNQUFBTSxVQUNBQyxNQUFBVCxFQUFBRSxNQUFBTyxNQUNBQyxRQUFBVixFQUFBRSxNQUFBUSxRQUNBQyxNQUFBWCxFQUFBRSxNQUFBUyxRQUdBQyxLQUFBLFNBQUFDLEdBQ0FULFFBQUFDLElBQUFRLEdBQ0FDLEVBQUEsV0FBQUMsT0FBQUMsTUFBQSxLQUFBQyxVQUNBakIsRUFBQUMsU0FDQSxTQUFBWSxHQUNBVCxRQUFBQyxJQUFBUSxTQ3JCQXhCLFFBQUFDLE9BQUEsT0FDQVMsV0FBQSxhQUFBLFNBQUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxTQUFBQyxFQUFBUixFQUFBMEIsRUFBQUMsRUFBQUMsR0FFQXBCLEVBQUFxQixTQUFB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RUEsTUFBQTlDLEdBQUFjLEtBQUEsZ0JBQ0ErQixTQUFBQSxFQUNBQyxTQUFBQSxJQUlBLFFBQUFnQixHQUFBQyxFQUFBbEIsRUFBQUMsR0FFQSxNQUFBOUMsR0FBQWMsS0FBQSxhQUNBaUQsS0FBQUEsRUFDQWxCLFNBQUFBLEVBQ0FDLFNBQUFBLElBS0EsUUFBQVIsS0FDQWlCLGFBQUF5QixXQUFBLGNBQ0F6QixhQUFBeUIsV0FBQSxlQUNBL0UsRUFBQUksZUFBQTJFLFdBQUEsb0JBQ0FoRixHQUFBRSxTQUFBQyxRQUFBQyxPQUFBLFVBQ0FpRCxFQUFBNEIsVUFBQSxFQUNBNUIsRUFBQUksWUFBQSxLQUNBOUIsRUFBQU8sS0FBQSxVQU1BLFFBQUFjLEdBQUFELEVBQUFtQyxHQUNBakYsRUFBQUksZUFBQSxXQUFBMEMsRUFDQVEsYUFBQU0sUUFBQSxhQUFBZCxHQUNBL0MsRUFBQUUsU0FBQUMsUUFBQUMsT0FBQSxVQUFBSCxFQUFBSSxlQUFBQyxXQUNBNEUsR0FBQSxrQkFBQUEsSUFDQUEsSUFJQSxRQUFBRCxNQUlBLFFBQUEvQixHQUFBSCxFQUFBbUMsR0FHQTdCLEVBQUFJLFlBQUFWLEVBQUFnQixLQUNBUixhQUFBTSxRQUFBLGNBQUFSLEVBQUFJLGFBQ0FKLEVBQUE0QixVQUFBLEVBQ0FDLEdBQUEsa0JBQUFBLElBQ0FBLElBS0EsUUFBQS9CLEtBQ0FFLEVBQUE4QixjQUNBeEQsRUFBQU8sS0FBQW1CLEVBQUE4QixlQUVBeEQsRUFBQU8sS0FBQSxVQTVFQSxPQUNBZSxRQUFBQSxFQUNBTCxNQUFBQSxFQUNBa0IsU0FBQUEsRUFDQXhCLE9BQUFBLEVBQ0FVLFdBQUFBLEVBQ0FpQyxTQUFBQSxFQUNBL0IsYUFBQUEsRUFDQUMsc0JBQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgJ25nUm91dGUnLCAndWkucm91dGVyJ1xuXSlcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5ydW4oWyckaHR0cCcsICckd2luZG93JywgZnVuY3Rpb24oJGh0dHAsICR3aW5kb3cpIHtcbiAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYXV0aCddID0gJHdpbmRvdy5zZXNzaW9uU3RvcmFnZS51c2VyX3Rva2VuXG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ2FkZFVzZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuICAgICAgICAkc2NvcGUuc2V0dXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5tb2RlbCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5zZXR1cCgpO1xuICAgICAgICAkc2NvcGUuc2F2ZVVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHRoZSBmdW5jXCIpXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiAkc2NvcGUubW9kZWwuZmlyc3RfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbGFzdF9uYW1lOiAkc2NvcGUubW9kZWwubGFzdF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLm1vZGVsLnBob25lLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiAkc2NvcGUubW9kZWwuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6ICRzY29wZS5tb2RlbC5lbWFpbFxuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgJChcIiN0aGFua3NcIikuc2hvdygpLmRlbGF5KDUwMDApLmZhZGVPdXQoKVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dXAoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ2FkbWluQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGgsICRsb2NhdGlvbiwgJHRpbWVvdXQpIHtcblxuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgICRzY29wZS5zZXR1cCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RlbCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXG4gICAgICAgICAgICAgICAgICAgIC8vIG9yIHNlcnZlciByZXR1cm5zIHJlc3BvbnNlIHdpdGggYW4gZXJyb3Igc3RhdHVzLlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmF1dGhGYWlsID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7ICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNldHVwKCk7XG5cbiAgICAgICAgJHNjb3BlLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbih1c2VyX2lkKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZT8nKSkgcmV0dXJuO1xuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCcvYXBpL3VzZXJzLycgKyB1c2VyX2lkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dXAoKTtcblxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZXJyb3Igb2NjdXJzXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXV0aC5sb2dvdXQoKVxuICAgICAgICB9XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ2VkaXRVc2VyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCkge1xuXG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLnNldHVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc3RhdGVQYXJhbXMpXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvJyArICRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kZWwgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubW9kZWwpXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnVwZGF0ZVVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICRodHRwLnB1dCgnL2FwaS91c2Vycy8nICsgJHN0YXRlUGFyYW1zLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6ICRzY29wZS5tb2RlbC5maXJzdF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBsYXN0X25hbWU6ICRzY29wZS5tb2RlbC5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBob25lOiAkc2NvcGUubW9kZWwucGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6ICRzY29wZS5tb2RlbC5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogJHNjb3BlLm1vZGVsLmVtYWlsXG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyU2F2ZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkc2NvcGUudXNlclNhdmVkID0gZmFsc2U7IH0sIDMwMDApO1xuXG5cbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cblxuXG4gICAgICAgICRzY29wZS5zZXR1cCgpO1xuXG5cblxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignbG9naW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBhdXRoLCAkbG9jYXRpb24sICR0aW1lb3V0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9naW4gY29udHJvbGxlclwiKVxuICAgICAgICAkc2NvcGUuYXV0aEZhaWwgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICBhdXRoLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aC5zdG9yZVRva2VuKHJlcy5kYXRhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGguZ2V0VXNlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGgucG9zdExvZ2luT3BzKHJlcy5kYXRhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGgucG9zdExvZ2luUm91dGVIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2lzdHMgZXJyb3InLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmF1dGhGYWlsID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7ICRzY29wZS5hdXRoRmFpbCA9IGZhbHNlOyB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmluYWxseSBmaW5pc2hlZCBnaXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ21hc3RlckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUsICRyb3V0ZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1hc3RlckN0cmxcIik7XG5cbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWRfdXNlcicpKSB7ICAgICAgICAgIFxuICAgICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWRfdXNlcicpXG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbihfLCB1c2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvZ2dlZCBJblwiKTtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXJcbiAgICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXIgPSB1c2VyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZ2VkX3VzZXInLCAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lKVxuICAgICAgICB9KVxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdyZWdpc3RlckN0cmwnLGZ1bmN0aW9uKCRzY29wZSxhdXRoLCRsb2NhdGlvbil7XG5cdCRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsdXNlcm5hbWUscGFzc3dvcmQpe1xuXHRcdGF1dGgucmVnaXN0ZXIobmFtZSx1c2VybmFtZSxwYXNzd29yZClcblx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHRcdFx0XG5cdFx0XHRhdXRoLmxvZ2luKHVzZXJuYW1lLHBhc3N3b3JkKVxuXHRcdFx0JHNjb3BlLiRlbWl0KCdsb2dpbicscmVzcG9uc2UuZGF0YSlcblx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvYWRtaW4nKVxuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uIChlcnIpe1xuXHRcdFx0Y29uc29sZS5sb2coZXJyKVxuXHRcdH0pXG5cdH1cblxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnYXBwJywge1xuICAgICAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvbGFuZGluZy5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd1c2VyUmVnaXN0ZXJDdHJsJ1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ3RybCdcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgdXJsOiAnL2VmYjgyZWM3YTFhMGU0NzdhMzNlMjA5ZGFjZDJhMWUwJyxcbiAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3JlZ2lzdGVyLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncmVnaXN0ZXJDdHJsJ1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnYWRtaW4nLCB7XG4gICAgICAgICAgICB1cmw6ICcvYWRtaW4nLFxuICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAnbmF2Jzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9uYXYuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhZG1pbkN0cmwnXG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hZG1pbi5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2FkbWluQ3RybCdcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2FkbWluLm5ldycsIHtcbiAgICAgICAgICAgIHVybDogJy9uZXcnLFxuICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FkZFVzZXIuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhZGRVc2VyQ3RybCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2FkbWluLmRldGFpbHMnLCB7XG4gICAgICAgICAgICB1cmw6ICcvOmlkJyxcblxuICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZWRpdFVzZXIuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdlZGl0VXNlckN0cmwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pXG5cblxuXG5cblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSlcblxuXG4gICAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigndXNlclJlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApIHtcbiAgICAgICAgXG5cblxuICAgICAgICBjb25zb2xlLmxvZyhcImhlcmUgaW4gbGFuZGluZ1wiKVxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuc2VydmljZSgnYXV0aCcsIGZ1bmN0aW9uKCRodHRwLCAkd2luZG93LCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcblxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRVc2VyOiBnZXRVc2VyLFxuICAgICAgICAgICAgbG9naW46IGxvZ2luLFxuICAgICAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyLFxuICAgICAgICAgICAgbG9nb3V0OiBsb2dvdXQsXG4gICAgICAgICAgICBzdG9yZVRva2VuOiBzdG9yZVRva2VuLFxuICAgICAgICAgICAgaXNMb2dnZWQ6IGlzTG9nZ2VkLFxuICAgICAgICAgICAgcG9zdExvZ2luT3BzOiBwb3N0TG9naW5PcHMsXG4gICAgICAgICAgICBwb3N0TG9naW5Sb3V0ZUhhbmRsZXI6IHBvc3RMb2dpblJvdXRlSGFuZGxlclxuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRVc2VyKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluJylcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3Nlc3Npb25zJywge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlcihuYW1lLCB1c2VybmFtZSwgcGFzc3dvcmQpIHtcblxuICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvYWRtaW4nLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcl90b2tlbicpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xvZ2dlZF91c2VyJyk7XG4gICAgICAgICAgICAkd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJfdG9rZW4nKTtcbiAgICAgICAgICAgIGRlbGV0ZSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsneC1hdXRoJ11cbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXIgPSBudWxsO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIilcblxuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0b3JlVG9rZW4ocmVzLCBjYikge1xuICAgICAgICAgICAgJHdpbmRvdy5zZXNzaW9uU3RvcmFnZVtcInVzZXJfdG9rZW5cIl0gPSByZXNcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyX3Rva2VuJywgcmVzKTtcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyd4LWF1dGgnXSA9ICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudXNlcl90b2tlblxuICAgICAgICAgICAgaWYgKGNiICYmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzTG9nZ2VkKCkge1xuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwb3N0TG9naW5PcHMocmVzLCBjYikge1xuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXIgPSByZXMubmFtZVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvZ2dlZF91c2VyJywgJHJvb3RTY29wZS5jdXJyZW50VXNlcilcbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dnZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGNiICYmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9zdExvZ2luUm91dGVIYW5kbGVyKCkge1xuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUuaW50ZW5kZWRSb3V0ZSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCRyb290U2NvcGUuaW50ZW5kZWRSb3V0ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYWRtaW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcblxuICAgIH0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
